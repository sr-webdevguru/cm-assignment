<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="/static/mkdocs/img/favicon.ico">

	<title>Authentication API - Medic52 API Documentation</title>

        <link href="/static/mkdocs/css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="/static/mkdocs/css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="/static/mkdocs/css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="/static/mkdocs/css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="/docs">Medic52 API Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li>
                        <a href="/docs">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            <li >
                                <a href="../oAuth/">oAuth2 API</a>
                            </li>
                        
                            <li class="active">
                                <a href="./">Authentication API</a>
                            </li>
                        
                        </ul>
                    </li>
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                
                <li >
                    <a rel="next" href="../oAuth/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li class="disabled">
                    <a rel="prev" >
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#authentication-api-documentation">Authentication API documentation</a></li>
        
            <li><a href="#discover">Discover</a></li>
        
            <li><a href="#login">Login</a></li>
        
            <li><a href="#logout">Logout</a></li>
        
            <li><a href="#register">Register</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="authentication-api-documentation">Authentication API documentation</h1>
<p>This module details the Authentication API used in Medic52.</p>
<h2 id="discover">Discover</h2>
<p>This API can be used to get the domain name associated with user (or) resort.</p>
<h4 id="api-url">API URL</h4>
<pre><code>/api/v3/auth/discover/
</code></pre>

<h4 id="api-method">API Method</h4>
<pre><code>POST
</code></pre>

<h4 id="prerequisite">Prerequisite</h4>
<pre><code>access_token - set header &quot;Authorization: Bearer sald97asdasuhsd7dwq0ddisakdjsakd8u&quot;
</code></pre>

<h4 id="api-parameters">API Parameters</h4>
<ul>
<li>JSON Data<ul>
<li><code>email</code> is mandatory for user.</li>
<li><code>resort_token</code> (or) <code>resort_name</code> is required for resort  </li>
<li><code>email</code><ul>
<li>email of the user</li>
<li><strong>Default</strong> - <code>None</code></li>
</ul>
</li>
<li><code>resort_token</code><ul>
<li>resort token</li>
<li><strong>Default</strong> - <code>None</code></li>
</ul>
</li>
<li><code>resort_name</code><ul>
<li>name of the resort </li>
<li><strong>Default</strong> - <code>None</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="response-type">Response Type</h4>
<ul>
<li><code>200 (OK)</code><pre><code>{"location":"us.dev.api.medic52.com "}
</code></pre>
</li>
</ul>
<h4 id="example-request">Example Request</h4>
<pre><code>curl -X POST -H &quot;Authorization: Bearer U8achiIvMdIw867QLNEeIoNkYU41EI&quot; -d '{&quot;email&quot;: &quot;duncan@medic52.com&quot;}' http://api.dev.medic52.com/api/v3/auth/discover/
</code></pre>

<h2 id="login">Login</h2>
<p>This API can be used to get user logged in to the system.</p>
<ul>
<li>Web - Sets session in cookie for web which expires at 2 hour</li>
<li>Mobile - Returns access token which never expires</li>
</ul>
<h4 id="api-url_1">API URL</h4>
<pre><code>/api/v3/auth/login/
</code></pre>

<h4 id="api-method_1">API Method</h4>
<pre><code>POST
</code></pre>

<h4 id="prerequisite_1">Prerequisite</h4>
<pre><code>access_token - set header &quot;Authorization: Bearer sald97asdasuhsd7dwq0ddisakdjsakd8u&quot;
</code></pre>

<h4 id="api-parameters_1">API Parameters</h4>
<ul>
<li>JSON Data<ul>
<li><code>email</code> (<strong>required</strong>)<ul>
<li>email of the user</li>
<li><strong>Default</strong> - <code>None</code></li>
</ul>
</li>
<li><code>password</code> (<strong>required</strong>)<ul>
<li>password of user account</li>
<li><strong>Default</strong> - <code>None</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="response-type_1">Response Type</h4>
<ul>
<li>
<p><code>200 (OK)</code></p>
<pre><code>{
  "user": {
    "user_id": "4969b3b1-4faf-43b6-945e-4dff2fc92f08",
    "name": "David Holt",
    "email": "dispatcher@summit.com",
    "role_id": 1,
    "token": "DSUFYRH-D6SJGO5-SJSVISS7-SDJSDBSFJ6",
    "resort_count": "2",
    "resorts": [
      {
        "resort_name": "Summit",
        "resort_id": "33d0a784-3111-4624-a4f1-92857a9b7bb2",
        "kml_file": "http://nz.media.medic52.com/resorts/summit.kml",
        "map_type": "google-map",
        "lat": "33.0000000",
        "long": "-26.0000000",
        "report_form": "http://nz.media.medic52.com/resorts/summit.html",
        "default_unit_temp": "c",
        "default_unit_length": "m",
        "default_distance_distance": "km",
        "timezone": "America/Los Angeles"
      },
      {
        "resort_name": "Peak",
        "resort_id": "1f3efe2c-4500-4eeb-a09b-2c1320957813",
        "kml_file": "http://nz.media.medic52.com/resorts/peak.kml",
        "map_type": "google-earth",
        "lat": "34.0000000",
        "long": "-25.0000000",
        "report_form": "http://nz.media.medic52.com/resorts/peak.html",
        "default_unit_temp": "c",
        "default_unit_length": "m",
        "default_distance_distance": "km",
        "timezone": "America/Los Angeles"
      }
    ]
  }
}
</code></pre>
</li>
<li>
<p><code>401 (UNAUTHORIZED)</code> - If email and/or password does not matches any user in the system</p>
<pre><code>{"detail":"Invalid email/password. Please try with correct email/password"}
</code></pre>
</li>
<li>
<p><code>401 (UNAUTHORIZED)</code> - If invalid credential provided</p>
<pre><code>{"detail":"Invalid credential provided"}
</code></pre>
</li>
</ul>
<h4 id="example-request_1">Example Request</h4>
<pre><code>curl -X POST -H &quot;Authorization: Bearer 8CXRT4QpQmb9js8xEdajGqdWO3fEBl&quot; -H &quot;Content-Type: application/json&quot; -d '{&quot;email&quot;: &quot;duncan@medic52.com&quot;,&quot;password&quot;: &quot;realpassword&quot;}' http://api.dev.medic52.com/api/v3/auth/login/
</code></pre>

<h2 id="logout">Logout</h2>
<p>This API can be used to logout user.</p>
<ul>
<li>Web - Invalidates session for the user</li>
</ul>
<h4 id="api-url_2">API URL</h4>
<pre><code>/api/v3/auth/logout/&lt;user_id&gt;
</code></pre>

<h4 id="api-method_2">API Method</h4>
<pre><code>POST
</code></pre>

<h4 id="prerequisite_2">Prerequisite</h4>
<pre><code>access_token - set header &quot;Authorization: Bearer sald97asdasuhsd7dwq0ddisakdjsakd8u&quot;
</code></pre>

<h4 id="api-parameters_2">API Parameters</h4>
<ul>
<li>None</li>
</ul>
<h4 id="response-type_2">Response Type</h4>
<ul>
<li><code>200 (OK)</code><pre><code>{"detail":"User is logged out"}
</code></pre>
</li>
</ul>
<h4 id="example-request_2">Example Request</h4>
<pre><code>curl -X POST -H &quot;Authorization: Bearer 8CXRT4QpQmb9js8xEdajGqdWO3fEBl&quot; http://localhost:8090/api/v3/auth/logout/9704b80d-cd29-43ea-95be-eb4809803b4b
</code></pre>

<h2 id="register">Register</h2>
<p>This API can be used to register new user in the system</p>
<h4 id="api-url_3">API URL</h4>
<pre><code>/api/v3/auth/register/
</code></pre>

<h4 id="api-method_3">API Method</h4>
<pre><code>POST
</code></pre>

<h4 id="prerequisite_3">Prerequisite</h4>
<pre><code>access_token - set header &quot;Authorization: Bearer sald97asdasuhsd7dwq0ddisakdjsakd8u&quot;
</code></pre>

<h4 id="api-parameters_3">API Parameters</h4>
<ul>
<li>JSON Data<ul>
<li><code>name</code> (<strong>required</strong>)<ul>
<li>Name of user</li>
</ul>
</li>
<li><code>email_address</code> (<strong>required</strong>)<ul>
<li>Email of user</li>
</ul>
</li>
<li><code>resort_name</code> (<strong>required</strong>)<ul>
<li>Name of resort</li>
</ul>
</li>
<li><code>resort_network_key</code><ul>
<li>If user needs to be connected to existing resort through network key</li>
</ul>
</li>
<li><code>device_push_token</code> (<strong>required</strong>)<ul>
<li>Push token of device to be registered</li>
</ul>
</li>
<li><code>device_os</code> (<strong>required</strong>)<ul>
<li>OS of device to be registered</li>
</ul>
</li>
<li><code>device_type</code> (<strong>required</strong>)<ul>
<li>Device type of the device to be registered</li>
</ul>
</li>
<li><code>country</code> (<strong>required</strong>)<ul>
<li>country where user resides</li>
</ul>
</li>
<li><code>timezone</code> (<strong>required</strong>)<ul>
<li>Timezone information</li>
</ul>
</li>
<li><code>password</code> (<strong>required</strong>)<ul>
<li>Password for user account</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="response-type_3">Response Type</h4>
<ul>
<li>
<p><code>200 (OK)</code></p>
<pre><code>{
    "resort_id": "f820e113-8c70-4bd3-8c7f-72cffed2c4cd",
    "token": "4cb4cdd47c3415ab7a5ac879d3a39ef50c997001",
    "user_id": "775934b9-973d-4514-98ac-654b6d292cca",
    "device_id": "5b9df746-e43d-408f-b53b-1b0e3b8d8334"
}
</code></pre>
</li>
<li>
<p><code>400 (Bad Request)</code> - If resort name and resort network key not passed</p>
<pre><code>{"detail":"resort name and/or resort network key not provided"}
</code></pre>
</li>
<li>
<p><code>400 (Bad Request)</code> - If provided network key does not matches with any resort</p>
<pre><code>{"detail": "Resort with network key does not exist"}
</code></pre>
</li>
</ul>
<h4 id="example-request_3">Example Request</h4>
<pre><code>curl -X POST -H &quot;Authorization: Bearer EU7EerAa61565wxn7H1EaPFAG9PqkN&quot; -d '{
    &quot;name&quot;:&quot;Mr Roberts&quot;,
    &quot;email&quot;:&quot;manager@summit.com&quot;,
    &quot;resort_name&quot;: &quot;Perisher&quot;,
    &quot;device_push_token&quot;:&quot;3a0c0ac71ee49eac8b0444a85f1c16692106c3d&quot;,
    &quot;device_os&quot;:&quot;iOS 7.0.2&quot;,
    &quot;device_type&quot;:&quot;iPhone 6&quot;,
    &quot;country&quot;:&quot;Australia&quot;,
    &quot;timezone&quot;:&quot;Australia/Sydney&quot;,
    &quot;password&quot;:&quot;PLAINTEXTPASSWORD&quot;
}' http://api.dev.medic52.com/api/v3/auth/register/
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="/static/mkdocs/js/jquery-1.10.2.min.js"></script>
        <script src="/static/mkdocs/js/bootstrap-3.0.3.min.js"></script>
        <script src="/static/mkdocs/js/highlight.pack.js"></script>
        <script src="/static/mkdocs/js/base.js"></script>

        <!--
        MkDocs version  : 0.12.2
        Docs Build Date : 2015-05-05 07:24:08.566024
        -->
    </body>
</html>